import{a as S}from"./assets/vendor-bdb8a163.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}})();const L="https://api.themoviedb.org/3",b="82b205270d637f8e7c805273646956b7",P="/discover/movie",M="/genre/movie/list",N="https://image.tmdb.org/t/p/w200/",w="/search/movie",x={api_key:b},d=S.create({baseURL:L,params:x}),m="page",g="total_pages",E=async(o=1)=>{const{data:e}=await d(`${P}?page=${o}`);return e},p=async()=>{const{data:o}=await d(`${M}`);return o},I=async o=>{const{data:e}=await d(`${w}?query=${o}`);return e},$=document.querySelector(".movies-list"),f=(o,e)=>{$.innerHTML=o.map(({title:a,poster_path:n,genre_ids:t,release_date:s})=>{const i=e.filter(u=>t.includes(u.id)).map(u=>u.name).join(", "),h=s.split("-")[0];return`
    <li class="movies-item">
      <img class="movies-img" src="${N+n}" alt=""/>
      <p class="movies-title overflowWrap">${a}</p>
      <p class="movies-text overflowWrap">${i} | ${h}</p>
    </li>
    `}).join("")},v=async o=>{try{const{page:e,total_pages:a,results:n}=await E(o),{genres:t}=await p();n.length>0&&f(n,t),a>1&&(localStorage.setItem(m,e),localStorage.setItem(g,a))}catch(e){console.log(e.message)}},q=document.querySelector(".js__header-input");q.addEventListener("input",_);async function _(o){const e=o.currentTarget.value;try{const{results:a}=await I(e),{genres:n}=await p();f(a,n)}catch(a){console.log(a.message)}}v();const O=document.querySelector(".pagination-container"),A=document.querySelectorAll(".page"),B=document.querySelector(".prev"),C=document.querySelector(".next");let r=Number(localStorage.getItem(m))?Number(localStorage.getItem(m)):1;const c=Number(localStorage.getItem(g))>500?500:Number(localStorage.getItem(g)),l=5,y=()=>{let o=Math.floor(l/2),e=Math.max(r-o,1),a=Math.min(r+o,c);a-e+1<l&&(e===1?a=Math.min(e+l-1,c):a===c&&(e=Math.max(a-l+1,1))),A.forEach((n,t)=>{const s=e+t;n.textContent=String(s),s===r?n.classList.add("pagination-current"):n.classList.remove("pagination-current")}),B.disabled=r===1,C.disabled=r===c},T=async o=>{o.target.classList.contains("page")&&(r=Number(o.target.textContent)),o.target.classList.contains("prev")&&(r-=1),o.target.classList.contains("next")&&(r+=1),v(r),y()};y();O.addEventListener("click",T);
//# sourceMappingURL=commonHelpers.js.map
