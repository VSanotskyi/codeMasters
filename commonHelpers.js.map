{"version":3,"file":"commonHelpers.js","sources":["../src/js/constants/urls.js","../src/js/services/apiServices.js","../src/js/constants/storageKey.js","../src/js/services/moviesServices.js","../src/js/moviesList/moviesList.js","../src/js/home/home.js","../src/js/pagination/pagination.js"],"sourcesContent":["const baseURL = 'https://api.themoviedb.org/3'\nconst api_key = '82b205270d637f8e7c805273646956b7'\nconst movies = '/discover/movie'\nconst genre = '/genre/movie/list'\nconst defaultUrlImage = 'https://image.tmdb.org/t/p/w200/'\n\nexport {\n  baseURL,\n  api_key,\n  movies,\n  defaultUrlImage,\n  genre,\n}","import axios from \"axios\";\n\nimport {baseURL, api_key} from \"../constants/urls.js\";\n\nconst params = {\n  api_key,\n}\n\nconst apiService = axios.create({baseURL, params});\n\nexport {\n  apiService,\n}\n","const PAGE_KEY = 'page';\nconst TOTAL_PAGES_KEY = 'total_pages';\n\nexport {\n  PAGE_KEY,\n  TOTAL_PAGES_KEY,\n};","import { apiService } from './apiServices.js';\nimport { genre, movies } from '../constants/urls.js';\nimport { PAGE_KEY } from '../constants/storageKey.js';\n\nconst getAllMovies = async (page = 1) => {\n  const { data } = await apiService(`${movies}?page=${page}`);\n\n  return data;\n};\n\nconst getGenres = async () => {\n  const { data } = await apiService(`${genre}`);\n\n  return data;\n};\n\nexport { getAllMovies, getGenres };\n","import { defaultUrlImage } from '../constants/urls.js';\nimport { getAllMovies, getGenres } from '../services/moviesServices.js';\nimport { PAGE_KEY, TOTAL_PAGES_KEY } from '../constants/storageKey.js';\n\nconst movieListEl = document.querySelector('.movies-list');\n\nconst markupMovies = (movies, genres) => {\n  movieListEl.innerHTML = movies\n    .map(({ title, poster_path, genre_ids, release_date }) => {\n      const genresNameList = genres\n        .filter(el => genre_ids.includes(el.id))\n        .map(el => el.name)\n        .join(', ');\n\n      const releaseYear = release_date.split('-')[0];\n\n      return `\n    <li class=\"movies-item\">\n      <img class=\"movies-img\" src=\"${ defaultUrlImage + poster_path }\" alt=\"\"/>\n      <p class=\"movies-title overflowWrap\">${ title }</p>\n      <p class=\"movies-text overflowWrap\">${ genresNameList } | ${ releaseYear }</p>\n    </li>\n    `;\n    })\n    .join('')\n};\n\nconst getMovies = async (currentPage) => {\n  try {\n    const { page, total_pages, results } = await getAllMovies(currentPage);\n    const { genres } = await getGenres();\n\n    if (results.length > 0) {\n      markupMovies(results, genres);\n    }\n\n    if (total_pages > 1) {\n      localStorage.setItem(PAGE_KEY, page)\n      localStorage.setItem(TOTAL_PAGES_KEY, total_pages)\n    }\n  } catch (err) {\n    console.log(err.message);\n  }\n};\n\nexport { getMovies };\n","import { getMovies } from '../moviesList/moviesList.js';\n\nvoid getMovies();\n","import { PAGE_KEY, TOTAL_PAGES_KEY } from '../constants/storageKey.js';\nimport { getMovies } from '../moviesList/moviesList.js';\n\nconst paginationContainerEl = document.querySelector('.pagination-container');\nconst pageButtons = document.querySelectorAll('.page');\nconst prevButton = document.querySelector('.prev');\nconst nextButton = document.querySelector('.next');\n\nlet currentPage = Number(localStorage.getItem(PAGE_KEY)) ? Number(localStorage.getItem(PAGE_KEY)) : 1;\nconst totalPages = Number(localStorage.getItem(TOTAL_PAGES_KEY)) > 500\n  ? 500\n  : Number(localStorage.getItem(TOTAL_PAGES_KEY));\nconst visiblePage = 5;\n\nconst updatePagination = () => {\n  let halfVisible = Math.floor(visiblePage / 2);\n  let startPage = Math.max(currentPage - halfVisible, 1);\n  let endPage = Math.min(currentPage + halfVisible, totalPages);\n\n  if (endPage - startPage + 1 < visiblePage) {\n    if (startPage === 1) {\n      endPage = Math.min(startPage + visiblePage - 1, totalPages);\n    } else if (endPage === totalPages) {\n      startPage = Math.max(endPage - visiblePage + 1, 1);\n    }\n  }\n\n  pageButtons.forEach((btn, i) => {\n    const pageNumber = startPage + i;\n\n    btn.textContent = String(pageNumber);\n\n    if (pageNumber === currentPage) {\n      btn.classList.add('pagination-current');\n    } else {\n      btn.classList.remove('pagination-current');\n    }\n  });\n\n  prevButton.disabled = currentPage === 1;\n  nextButton.disabled = currentPage === totalPages;\n};\n\nconst handleClickPaginationBtn = async (e) => {\n  if (e.target.classList.contains('page')) {\n    currentPage = Number(e.target.textContent);\n  }\n\n  if (e.target.classList.contains('prev')) {\n    currentPage -= 1;\n  }\n\n  if (e.target.classList.contains('next')) {\n    currentPage += 1;\n  }\n\n  void getMovies(currentPage);\n\n  updatePagination();\n};\n\nupdatePagination();\n\npaginationContainerEl.addEventListener('click', handleClickPaginationBtn);"],"names":["baseURL","api_key","movies","genre","defaultUrlImage","params","apiService","axios","PAGE_KEY","TOTAL_PAGES_KEY","getAllMovies","page","data","getGenres","movieListEl","markupMovies","genres","title","poster_path","genre_ids","release_date","genresNameList","el","releaseYear","getMovies","currentPage","total_pages","results","err","paginationContainerEl","pageButtons","prevButton","nextButton","totalPages","visiblePage","updatePagination","halfVisible","startPage","endPage","btn","i","pageNumber","handleClickPaginationBtn","e"],"mappings":"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"}