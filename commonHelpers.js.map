{"version":3,"file":"commonHelpers.js","sources":["../src/js/constants/urls.js","../src/js/services/apiServices.js","../src/js/constants/storageKey.js","../src/js/services/moviesServices.js","../src/js/moviesList/moviesList.js","../src/js/header.js","../src/js/home/home.js","../src/js/pagination/pagination.js"],"sourcesContent":["const baseURL = 'https://api.themoviedb.org/3';\nconst api_key = '82b205270d637f8e7c805273646956b7';\nconst movies = '/discover/movie';\nconst genre = '/genre/movie/list';\nconst defaultUrlImage = 'https://image.tmdb.org/t/p/w200/';\nconst defaultUrlForSearch = 'https://api.themoviedb.org/3';\nconst paramsForSearch = '/search/movie';\n\nexport { baseURL, api_key, movies, defaultUrlImage, genre, paramsForSearch };\n","import axios from 'axios';\n\nimport { baseURL, api_key } from '../constants/urls.js';\n\nconst params = {\n  api_key,\n};\n\nconst apiService = axios.create({ baseURL, params });\n\nexport { apiService };\n","const PAGE_KEY = 'page';\nconst TOTAL_PAGES_KEY = 'total_pages';\n\nexport {\n  PAGE_KEY,\n  TOTAL_PAGES_KEY,\n};","import { apiService } from './apiServices.js';\nimport { genre, movies, paramsForSearch } from '../constants/urls.js';\nimport { PAGE_KEY } from '../constants/storageKey.js';\n\nconst getAllMovies = async (page = 1) => {\n  const { data } = await apiService(`${movies}?page=${page}`);\n\n  return data;\n};\n\nconst getGenres = async () => {\n  const { data } = await apiService(`${genre}`);\n\n  return data;\n};\n\nconst getMovieBySearch = async movieName => {\n  const { data } = await apiService(`${paramsForSearch}?query=${movieName}`);\n\n  return data;\n};\n\nexport { getAllMovies, getGenres, getMovieBySearch };\n","import { defaultUrlImage } from '../constants/urls.js';\nimport { getAllMovies, getGenres } from '../services/moviesServices.js';\nimport { PAGE_KEY, TOTAL_PAGES_KEY } from '../constants/storageKey.js';\n\nconst movieListEl = document.querySelector('.movies-list');\n\nconst markupMovies = (movies, genres) => {\n  movieListEl.innerHTML = movies\n    .map(({ title, poster_path, genre_ids, release_date }) => {\n      const genresNameList = genres\n        .filter(el => genre_ids.includes(el.id))\n        .map(el => el.name)\n        .join(', ');\n\n      const releaseYear = release_date.split('-')[0];\n\n      return `\n    <li class=\"movies-item\">\n      <img class=\"movies-img\" src=\"${defaultUrlImage + poster_path}\" alt=\"\"/>\n      <p class=\"movies-title overflowWrap\">${title}</p>\n      <p class=\"movies-text overflowWrap\">${genresNameList} | ${releaseYear}</p>\n    </li>\n    `;\n    })\n    .join('');\n};\n\nconst getMovies = async currentPage => {\n  try {\n    const { page, total_pages, results } = await getAllMovies(currentPage);\n    const { genres } = await getGenres();\n\n    if (results.length > 0) {\n      markupMovies(results, genres);\n    }\n\n    if (total_pages > 1) {\n      localStorage.setItem(PAGE_KEY, page);\n      localStorage.setItem(TOTAL_PAGES_KEY, total_pages);\n    }\n  } catch (err) {\n    console.log(err.message);\n  }\n};\n\nexport { getMovies, markupMovies };\n","import { getMovieBySearch, getGenres } from './services/moviesServices';\nimport { markupMovies } from './moviesList/moviesList';\n\nconst headerInput = document.querySelector('.js__header-input');\nheaderInput.addEventListener('input', findMovieByName);\n\nasync function findMovieByName(e) {\n  const movieName = e.currentTarget.value;\n\n  try {\n    const { results } = await getMovieBySearch(movieName);\n    const { genres } = await getGenres();\n    // console.log(genres);\n    // console.log(results);\n    markupMovies(results, genres);\n  } catch (e) {\n    console.log(e.message);\n  }\n}\n","import { getMovies } from '../moviesList/moviesList.js';\n\nvoid getMovies();\n","import { PAGE_KEY, TOTAL_PAGES_KEY } from '../constants/storageKey.js';\nimport { getMovies } from '../moviesList/moviesList.js';\n\nconst paginationContainerEl = document.querySelector('.pagination-container');\nconst pageButtons = document.querySelectorAll('.page');\nconst prevButton = document.querySelector('.prev');\nconst nextButton = document.querySelector('.next');\n\nlet currentPage = Number(localStorage.getItem(PAGE_KEY)) ? Number(localStorage.getItem(PAGE_KEY)) : 1;\nconst totalPages = Number(localStorage.getItem(TOTAL_PAGES_KEY)) > 500\n  ? 500\n  : Number(localStorage.getItem(TOTAL_PAGES_KEY));\nconst visiblePage = 5;\n\nconst updatePagination = () => {\n  let halfVisible = Math.floor(visiblePage / 2);\n  let startPage = Math.max(currentPage - halfVisible, 1);\n  let endPage = Math.min(currentPage + halfVisible, totalPages);\n\n  if (endPage - startPage + 1 < visiblePage) {\n    if (startPage === 1) {\n      endPage = Math.min(startPage + visiblePage - 1, totalPages);\n    } else if (endPage === totalPages) {\n      startPage = Math.max(endPage - visiblePage + 1, 1);\n    }\n  }\n\n  pageButtons.forEach((btn, i) => {\n    const pageNumber = startPage + i;\n\n    btn.textContent = String(pageNumber);\n\n    if (pageNumber === currentPage) {\n      btn.classList.add('pagination-current');\n    } else {\n      btn.classList.remove('pagination-current');\n    }\n  });\n\n  prevButton.disabled = currentPage === 1;\n  nextButton.disabled = currentPage === totalPages;\n};\n\nconst handleClickPaginationBtn = async (e) => {\n  if (e.target.classList.contains('page')) {\n    currentPage = Number(e.target.textContent);\n  }\n\n  if (e.target.classList.contains('prev')) {\n    currentPage -= 1;\n  }\n\n  if (e.target.classList.contains('next')) {\n    currentPage += 1;\n  }\n\n  void getMovies(currentPage);\n\n  updatePagination();\n};\n\nupdatePagination();\n\npaginationContainerEl.addEventListener('click', handleClickPaginationBtn);"],"names":["baseURL","api_key","movies","genre","defaultUrlImage","paramsForSearch","params","apiService","axios","PAGE_KEY","TOTAL_PAGES_KEY","getAllMovies","page","data","getGenres","getMovieBySearch","movieName","movieListEl","markupMovies","genres","title","poster_path","genre_ids","release_date","genresNameList","el","releaseYear","getMovies","currentPage","total_pages","results","err","headerInput","findMovieByName","e","paginationContainerEl","pageButtons","prevButton","nextButton","totalPages","visiblePage","updatePagination","halfVisible","startPage","endPage","btn","i","pageNumber","handleClickPaginationBtn"],"mappings":"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"}