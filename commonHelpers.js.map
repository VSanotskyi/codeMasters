{"version":3,"file":"commonHelpers.js","sources":["../src/js/constants/urls.js","../src/js/services/apiServices.js","../src/js/services/moviesServices.js","../src/js/constants/storageKey.js","../src/js/moviesList/moviesList.js","../src/js/header.js","../src/js/home/home.js","../src/js/pagination/pagination.js","../src/js/movieDetailsModalMarkup/movieDetailsModalMarkup.js","../src/js/movieDetailsModal/movieDetailsModal.js","../src/js/btnScrollUp/btnScrollUp.js"],"sourcesContent":["const baseURL = 'https://api.themoviedb.org/3';\nconst api_key = '82b205270d637f8e7c805273646956b7';\nconst defaultUrlImage = 'https://image.tmdb.org/t/p/w200/';\nconst movies = '/discover/movie';\nconst genre = '/genre/movie/list';\nconst paramsForSearch = '/search/movie';\nconst movieDetails = '/movie';\n\nexport {\n  baseURL,\n  api_key,\n  movies,\n  defaultUrlImage,\n  genre,\n  paramsForSearch,\n  movieDetails,\n};\n","import axios from 'axios';\n\nimport { baseURL, api_key } from '../constants/urls.js';\n\nconst params = {\n  api_key,\n};\n\nconst apiService = axios.create({ baseURL, params });\n\nexport { apiService };\n","import { apiService } from './apiServices.js';\nimport { genre, movies, paramsForSearch, movieDetails } from '../constants/urls.js';\n\nconst getAllMovies = async (page = 1) => {\n  const { data } = await apiService(`${ movies }?page=${ page }`);\n\n  return data;\n};\n\nconst getGenres = async () => {\n  const { data } = await apiService(`${ genre }`);\n\n  return data;\n};\n\nconst getMovieBySearch = async (movieName) => {\n  const { data } = await apiService(`${ paramsForSearch }?query=${ movieName }`);\n\n  return data;\n};\n\nconst getMovieDetails = async (movieId) => {\n  const { data } = await apiService(`${ movieDetails }/${ movieId }`);\n\n  return data;\n};\n\nexport {\n  getAllMovies,\n  getGenres,\n  getMovieBySearch,\n  getMovieDetails,\n};\n","const PAGE_KEY = 'page';\nconst TOTAL_PAGES_KEY = 'total_pages';\n\nexport {\n  PAGE_KEY,\n  TOTAL_PAGES_KEY,\n};","import { defaultUrlImage } from '../constants/urls.js';\nimport { getAllMovies, getGenres } from '../services/moviesServices.js';\nimport { PAGE_KEY, TOTAL_PAGES_KEY } from '../constants/storageKey.js';\n\nconst movieListEl = document.querySelector('.movies-list');\n\nconst markupMovies = (movies, genres) => {\n  movieListEl.innerHTML = movies\n    .map(({ title, poster_path, genre_ids, release_date, id }) => {\n      const genresNameList = genres\n        .filter(el => genre_ids.includes(el.id))\n        .map(el => el.name)\n        .join(', ');\n\n      const releaseYear = release_date.split('-')[0];\n\n      return `\n    <li class=\"movies-item\" data-id=\"${id}\">\n      <img class=\"movies-img\" src=\"${defaultUrlImage + poster_path}\" alt=\"\"/>\n      <p class=\"movies-title overflowWrap\">${title}</p>\n      <p class=\"movies-text overflowWrap\">${genresNameList} | ${releaseYear}</p>\n    </li>\n    `;\n    })\n    .join('');\n};\n\nconst getMovies = async currentPage => {\n  try {\n    const { page, total_pages, results } = await getAllMovies(currentPage);\n    const { genres } = await getGenres();\n\n    if (results.length > 0) {\n      markupMovies(results, genres);\n    }\n\n    if (total_pages > 1) {\n      localStorage.setItem(PAGE_KEY, page);\n      localStorage.setItem(TOTAL_PAGES_KEY, total_pages);\n    }\n  } catch (err) {\n    console.log(err.message);\n  }\n};\n\nexport { getMovies, markupMovies };\n","import { getMovieBySearch, getGenres } from './services/moviesServices';\nimport { markupMovies } from './moviesList/moviesList';\n\nconst headerInput = document.querySelector('.js__header-input');\nheaderInput.addEventListener('input', findMovieByName);\n\nasync function findMovieByName(e) {\n  const movieName = e.currentTarget.value;\n\n  try {\n    const { results } = await getMovieBySearch(movieName);\n    const { genres } = await getGenres();\n    // console.log(genres);\n    // console.log(results);\n    markupMovies(results, genres);\n  } catch (e) {\n    console.log(e.message);\n  }\n}\n","import { getMovies } from '../moviesList/moviesList.js';\n\nvoid getMovies();\n","import { PAGE_KEY, TOTAL_PAGES_KEY } from '../constants/storageKey.js';\nimport { getMovies } from '../moviesList/moviesList.js';\n\nconst paginationContainerEl = document.querySelector('.pagination-container');\nconst pageButtons = document.querySelectorAll('.page');\nconst prevButton = document.querySelector('.prev');\nconst nextButton = document.querySelector('.next');\n\nlet currentPage = Number(localStorage.getItem(PAGE_KEY)) ? Number(localStorage.getItem(PAGE_KEY)) : 1;\nconst totalPages = Number(localStorage.getItem(TOTAL_PAGES_KEY)) > 500\n  ? 500\n  : Number(localStorage.getItem(TOTAL_PAGES_KEY));\nconst visiblePage = 5;\n\nconst updatePagination = () => {\n  let halfVisible = Math.floor(visiblePage / 2);\n  let startPage = Math.max(currentPage - halfVisible, 1);\n  let endPage = Math.min(currentPage + halfVisible, totalPages);\n\n  if (endPage - startPage + 1 < visiblePage) {\n    if (startPage === 1) {\n      endPage = Math.min(startPage + visiblePage - 1, totalPages);\n    } else if (endPage === totalPages) {\n      startPage = Math.max(endPage - visiblePage + 1, 1);\n    }\n  }\n\n  pageButtons.forEach((btn, i) => {\n    const pageNumber = startPage + i;\n\n    btn.textContent = String(pageNumber);\n\n    if (pageNumber === currentPage) {\n      btn.classList.add('pagination-current');\n    } else {\n      btn.classList.remove('pagination-current');\n    }\n  });\n\n  prevButton.disabled = currentPage === 1;\n  nextButton.disabled = currentPage === totalPages;\n};\n\nconst handleClickPaginationBtn = async (e) => {\n  if (e.target.classList.contains('page')) {\n    currentPage = Number(e.target.textContent);\n  }\n\n  if (e.target.classList.contains('prev')) {\n    currentPage -= 1;\n  }\n\n  if (e.target.classList.contains('next')) {\n    currentPage += 1;\n  }\n\n  void getMovies(currentPage);\n\n  updatePagination();\n};\n\nupdatePagination();\n\npaginationContainerEl.addEventListener('click', handleClickPaginationBtn);","import { defaultUrlImage } from '../constants/urls.js';\n\nconst modalWrapperEl = document.querySelector('.modal-wrapper');\n\nconst movieDetailsModalMarkup = (movieDetails) => {\n  const {\n    poster_path,\n    original_title,\n    genres,\n    vote_average,\n    vote_count,\n    popularity,\n    overview,\n  } = movieDetails;\n\n  const normalizeGenres = genres.map(({ name }) => name).join(' ');\n  const normalizeImgUrl = defaultUrlImage + poster_path;\n  const normalizeOriginalTitle = original_title.toUpperCase();\n  const normalizePopularity = Math.round(popularity)\n\n  modalWrapperEl.innerHTML = `\n    <img class=\"modal-img\" src=\"${ normalizeImgUrl }\" alt=\"\">\n    <div class=\"modal-text-content-wrapper\">\n      <h3 class=\"modal-title\">${ normalizeOriginalTitle }</h3>\n      <ul class=\"modal-info-list\">\n        <li class=\"modal-info-item\">\n          <p class=\"modal-info-text\">Vote / Votes</p>\n          <p class=\"modal-info-text\">${ vote_average } / ${ vote_count }</p>\n        </li>\n        <li class=\"modal-info-item\">\n          <p class=\"modal-info-text\">Popularity</p>\n          <p class=\"modal-info-text\">${ normalizePopularity }</p>\n        </li>\n        <li class=\"modal-info-item\">\n          <p class=\"modal-info-text\">Original Title</p>\n          <p class=\"modal-info-text\">${ normalizeOriginalTitle }</p>\n        </li>\n        <li class=\"modal-info-item\">\n          <p class=\"modal-info-text\">Genre</p>\n          <p class=\"modal-info-text\">${ normalizeGenres }</p>\n        </li>\n      </ul>\n      <p class=\"modal-about\">\n        <span class=\"modal-about-title\">About</span>\n        ${ overview }\n      </p>\n      <div class=\"modal-btn-wrapper\">\n        <button type=\"button\" class=\"modal-btn\">Add to watched</button>\n        <button type=\"button\" class=\"modal-btn\">Add to queue</button>\n      </div>\n    </div>\n  `;\n};\n\nexport {\n  movieDetailsModalMarkup,\n};","import { getMovieDetails } from '../services/moviesServices.js';\nimport { movieDetailsModalMarkup } from '../movieDetailsModalMarkup/movieDetailsModalMarkup.js';\n\nconst moviesListEl = document.querySelector('.movies-list');\nconst backdropEl = document.querySelector('.backdrop');\nconst modalBtnCloseEl = document.querySelector('.modal-btn-close');\n\nconst handleOpenModal = async (e) => {\n  // check where user click\n  if (e.target.classList.contains('movies-list') === true) {\n    return;\n  }\n\n  // get movies id\n  const movieId = e.target.closest('li').dataset.id;\n\n  try {\n    // get movies details\n    const movieDetails = await getMovieDetails(movieId);\n\n    // remove class hidden\n    backdropEl.classList.remove('is-hidden');\n\n    // render movies details\n    movieDetailsModalMarkup(movieDetails);\n\n    // add event listener for esc\n    window.addEventListener('keydown', handleCloseModalEsc);\n    modalBtnCloseEl.addEventListener('click', handleCloseModal);\n    backdropEl.addEventListener('click', handleCloseModalClickBackdrop);\n\n  } catch (err) {\n    // if error from server, show message and render other markup\n    console.log(err.message);\n  }\n};\n\nconst handleCloseModal = () => {\n  backdropEl.classList.add('is-hidden');\n\n  window.removeEventListener('keydown', handleCloseModalEsc);\n  modalBtnCloseEl.removeEventListener('click', handleCloseModal);\n  backdropEl.removeEventListener('click', handleCloseModalClickBackdrop);\n};\n\nconst handleCloseModalEsc = (e) => {\n  if (e.code === 'Escape') {\n    handleCloseModal();\n  }\n};\n\nconst handleCloseModalClickBackdrop = (e) => {\n  if (e.target.classList.contains('backdrop')) {\n    handleCloseModal();\n  }\n};\n\nmoviesListEl.addEventListener('click', handleOpenModal);","const bntScrollUpEl = document.querySelector('.btn-scroll-up');\n\nwindow.addEventListener('scroll', () => {\n  if (window.scrollY > 250) {\n    bntScrollUpEl.style.display = 'flex';\n  } else {\n    bntScrollUpEl.style.display = 'none';\n  }\n});\n\nbntScrollUpEl.addEventListener('click', () => {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n});"],"names":["baseURL","api_key","defaultUrlImage","movies","genre","paramsForSearch","movieDetails","params","apiService","axios","getAllMovies","page","data","getGenres","getMovieBySearch","movieName","getMovieDetails","movieId","PAGE_KEY","TOTAL_PAGES_KEY","movieListEl","markupMovies","genres","title","poster_path","genre_ids","release_date","id","genresNameList","el","releaseYear","getMovies","currentPage","total_pages","results","err","headerInput","findMovieByName","e","paginationContainerEl","pageButtons","prevButton","nextButton","totalPages","visiblePage","updatePagination","halfVisible","startPage","endPage","btn","i","pageNumber","handleClickPaginationBtn","modalWrapperEl","movieDetailsModalMarkup","original_title","vote_average","vote_count","popularity","overview","normalizeGenres","name","normalizeImgUrl","normalizeOriginalTitle","normalizePopularity","moviesListEl","backdropEl","modalBtnCloseEl","handleOpenModal","handleCloseModalEsc","handleCloseModal","handleCloseModalClickBackdrop","bntScrollUpEl"],"mappings":"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"}